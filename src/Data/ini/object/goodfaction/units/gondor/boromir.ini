;------------------------------------------------------------------------------
;
;    Boromir.ini
;
;------------------------------------------------------------------------------

; Boromir
Object GondorBoromir
    ; *** ART Parameters ***
    
    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
    SelectPortrait = HPBorimir
    ButtonImage = HIBorimir

    Draw = W3DScriptedModelDraw ModuleTag_01
    
      OkToChangeModelColor = Yes
      
        ExtraPublicBone = PASSENGERBONE
              DependencySharedModelFlags = TURN_LEFT_HIGH_SPEED TURN_RIGHT_HIGH_SPEED MOVING ACCELERATE DECELERATE TURN_LEFT TURN_RIGHT ATTACKING BACKING_UP

;-----------OnFoot------------------------------------------------------------------------------------------------------    
        DefaultModelConditionState
            Model            = GUBoromirV_SKN
        End
        
;---------OnHorseback --------------------------------------------------------------------------------------------------
        ModelConditionState        = MOUNTED
            Model               = gubrmrhrs_skn
            WeaponLaunchBone    = PRIMARY PASSENGERBONE
        End

;-----------------------------------------------------------------------------------------------------------------------

        StaticModelLODMode = Yes

        ; --- Idle Anims
        IdleAnimationState
            StateName = Idle            
;            Animation           = IDLA
;                AnimationName     = GUBoromir_SKL.GUBoromir_IDLA 0 15
;                AnimationMode     = ONCE
;            End            
            Animation           = IDLB
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLB
                AnimationMode     = ONCE
                AnimationPriority   = 20
            End            
            Animation           = IDLD
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLD
                AnimationMode     = ONCE
                AnimationPriority   = 1
            End            
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript            
        End

        ; --- stunned anims
        AnimationState                =    FREEFALL MOUNTED
            Animation                =    freefall
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_FLYC
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End
        
        AnimationState                =    STUNNED_FLAILING MOUNTED
            Animation                =    JustDie
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_FLYC
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End
        
                ; --- death anims mounted
        AnimationState                =    DYING SPLATTED MOUNTED
            Animation                =    Land
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_LNDA
                AnimationMode        =    ONCE
            End
        End

        ; This is the no-spawn-horse type of death
        AnimationState                =    DYING MOUNTED; DEATH_2 Normally has DEATH_2, but just as a backup don't insist
            Animation                =    JustDie
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_DIEA
                AnimationMode        =    ONCE
            End
        End
        
        AnimationState                =    STUNNED_STANDING_UP MOUNTED
            Animation                =    StandUp
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_GTPA
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End


        AnimationState                =    STUNNED MOUNTED
            Animation                =    Land
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_LNDA
                AnimationMode        =    ONCE
            End
        End

        ;; SPECIAL SPEAR THROW ANIMS
        AnimationState        =  SPECIAL_WEAPON_ONE MOUNTED;using spear
            Animation           = SPRA
                AnimationName     = RUHHs_Theo_SKL.RUEomrHrs_SPRA  
                AnimationMode     = ONCE
            End
            FrameForPristineBonePositions = 60
        End

        AnimationState        =  SPECIAL_WEAPON_ONE
            StateName = Attacking_throw
            Animation
                AnimationName        = RUEomer_SKL.RUEomer_ATKE
                AnimationMode       = ONCE
            End
            FrameForPristineBonePositions = 58
        End
        
        ; --- movements
        
        
        
        
        
        
        AnimationState                =    MOUNTED TURN_LEFT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TNL1
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange= 1.8 1.8
                AnimationBlendTime    =    20
            End
        End
        
        AnimationState                =    MOUNTED TURN_RIGHT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TNR1
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange= 1.8 1.8
                AnimationBlendTime    =    20
            End
        End
        
        AnimationState                =    MOVING TURN_LEFT MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TRNL
                AnimationMode        =    LOOP
            End
;            ;ParticleSysBone            =    None CalvaryDustTrails
        End

        AnimationState                =    MOVING TURN_RIGHT MOUNTED
            Animation                =    TurnRight
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TRNR
                AnimationMode        =    LOOP
            End
;            ;ParticleSysBone            =    None CalvaryDustTrails
        End

        AnimationState                =    MOVING ACCELERATE MOUNTED
            Animation                =    Accelerate
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ACCL
                AnimationMode        =    LOOP
            End
            ;ParticleSysBone            =    None CalvaryDustTrails
        End

        AnimationState                =    MOVING DECELERATE MOUNTED
            Animation                =    Decelerate
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_DECL
                AnimationMode        =    ONCE
            End
            ;ParticleSysBone            =    None CalvaryDustTrails
        End

        AnimationState                =    MOVING WALKING MOUNTED
            Animation                =    Walk
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_WLKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
            ;ParticleSysBone            =    None InfantryDustTrails  
        End
        
        AnimationState                =    MOVING BACKING_UP MOUNTED
            Animation                =    BackingUp
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_BAKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
            ;ParticleSysBone            =    None InfantryDustTrails  
        End
        
        AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = MountedRunAndFire
                AnimationName       = RUHHs_Theo_SKL.RUHHs_Theo_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART  
        End

        AnimationState                =    MOVING MOUNTED
            Animation                =    RunA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_RUNA
                AnimationMode        =    LOOP
            End
             Flags                    =    RANDOMSTART
            ;ParticleSysBone            =    None CalvaryDustTrails  
        End
        
        AnimationState                =    FIRING_OR_PREATTACK_A MOUNTED
            Animation                =    AttackA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ATKA
                AnimationMode        =    ONCE
            End
            Animation                =    AttackB
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ATKB
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End
        
        AnimationState                =    SELECTED MOUNTED
            SimilarRestart            =   Yes            
            StateName                =    AtAttentionIdle
            Animation                =    ATNB
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLH
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
                if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
            EndScript
        End

        TransitionState                =    TRANS_Select
            Animation                =    ATNA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ATNA
                AnimationMode        =    ONCE
            End
        End        

        AnimationState                = MOUNTED
            Animation
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLA
                AnimationPriority    =    20
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Animation            =    IdleB
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLB
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Animation            =    IdleC
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLC
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
            ;BeginScript
            ;    Prev = CurDrawablePrevAnimationState()
            ;    if Prev == "STATE_Idle" then CurDrawablePlaySound("EomerVoiceMount") end
            ;EndScript
            ;StateName            = STATE_IdleMounted
        End
        
        ;;;;;;;;;;; UNMOUNTED STATE ;;;;;;;;;;;;;

        TransitionState       = Trans_None_To_Sword
            Animation           = GUBoromir_STHA
                AnimationName     = GUBoromir_SKL.GUBoromir_STHA ;
                AnimationMode     = ONCE
            End
        End
        TransitionState       = Trans_Sword_To_None
            Animation           = GUBoromir_STHB
                AnimationName     = GUBoromir_SKL.GUBoromir_STHB ;
                AnimationMode     = ONCE
            End
        End
        
        AnimationState        = STUNNED_FLAILING 
            Flags               = RANDOMSTART
            Animation           = GUBoromir_FLYA
                AnimationName     = GUBoromir_SKL.GUBoromir_FLYA
                AnimationMode     = LOOP
            End
        End


        ; --- Dying anims
        
        AnimationState        = DYING SPLATTED
            Animation           = GUBoromir_LNDA
                AnimationName     = GUBoromir_SKL.GUBoromir_LNDA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = DYING AFLAME
            Animation = DieAflame
                AnimationName       = GUBoromir_SKL.GUBoromir_MFDA
                AnimationMode       = LOOP
            End
        End
        AnimationState        = DYING
            Animation           = GUBoromir_DTHA
                AnimationName     = GUBoromir_SKL.GUBoromir_DTHA
                AnimationMode     = ONCE
            End
        End
        
        ; --- Stunned anims
        AnimationState        = STUNNED_STANDING_UP
            Animation           = GUBoromir_GTPA
                AnimationName     = GUBoromir_SKL.GUBoromir_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.3 1.3
            End
        End
        AnimationState        = STUNNED 
            Animation           = GUBoromir_LNDA
                AnimationName     = GUBoromir_SKL.GUBoromir_LNDA
                AnimationMode     = ONCE
            End
        End
        
        AnimationState        = PACKING_TYPE_2 
            StateName          =    CaptainPower
            Animation           = GUBoromir_CHRA
                AnimationName     = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.2 1.2
            End
        End

        ; -- Horn anims
        AnimationState        = UNPACKING SPECIAL_POWER_1
            Animation           
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = PREPARING SPECIAL_POWER_1
            Animation           
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNB
                AnimationMode     = ONCE
            End
        EnteringStateFX = FX_BoromirHorn
        End
        AnimationState        = PACKING SPECIAL_POWER_1
            Animation           
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNC
                AnimationMode     = ONCE
            End
        End
        AnimationState        = SPECIAL_POWER_1
            Animation           
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNB
                AnimationMode     = LOOP
            End
        End
        
        ; -- Last Stand Animations
        AnimationState        = UNPACKING SPECIAL_WEAPON_ONE
            Animation           
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = PREPARING SPECIAL_WEAPON_ONE
            Animation           
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
            End
            Animation           
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
            End
        EnteringStateFX = FX_BoromirHorn
        End
        AnimationState        = PACKING SPECIAL_WEAPON_ONE
            Animation           
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode     = ONCE
            End
        End
        AnimationState        = SPECIAL_WEAPON_ONE
            Animation           
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
            End
            Animation           
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
            End
        End
        
        ; --- Moving Anims
        AnimationState        = MOVING WANDER WEAPONSTATE_CLOSE_RANGE
            StateName           = WithSword
            ;ParticleSysBone     = None InfantryDustTrails
            Animation           = GUBoromir_WLKA
                AnimationName     = GUBoromir_SKL.GUBoromir_WLKA
                AnimationMode     = LOOP
            End
        End
        ; non mo cap
;        AnimationState        = MOVING WEAPONSTATE_CLOSE_RANGE
;            StateName           = WithSword
;            Flags               = RANDOMSTART
;            ;ParticleSysBone     = None InfantryDustTrails
;            Animation           = GUBoromir_RUNB
;                AnimationName     = GUBoromir_SKL.GUBoromir_RUNB
;                AnimationMode     = LOOP
;            End
;        End
;        AnimationState        = MOVING DAMAGED
;            Flags               = RANDOMSTART
;            ;ParticleSysBone     = None InfantryDustTrails
;            Animation           = GUBoromir_IWKA
;                AnimationName     = GUBoromir_SKL.GUBoromir_IWKA
;                AnimationMode     = LOOP
;            End
;        End
        AnimationState        = MOVING WANDER
            ;ParticleSysBone     = None InfantryDustTrails
            Animation           = GUBoromir_WLKA
                AnimationName     = GUBoromir_SKL.GUBoromir_WLKA
                AnimationMode     = LOOP
            End
        End
        
        
        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUBoromir_SKL.GUBoromir_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART  
        End
        
        
        AnimationState        = MOVING
            ;ParticleSysBone     = None InfantryDustTrails
            Flags               = RANDOMSTART
            Animation           = GUBoromir_RUNB
                AnimationName     = GUBoromir_SKL.GUBoromir_RUNA
                AnimationMode     = LOOP
            End
        End
        
        

        ; Attacking Anims [Weapon_A]
        AnimationState        = FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
            StateName           = WithSword
            Animation           = ATKA
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKB
                AnimationName    = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
        End

        AnimationState        = FIRING_OR_PREATTACK_A
            Animation           = GUBoromir_ATD1
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKB 
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
        End

        


        ; --------- Idle Anims -non mocap-
;        AnimationState        = WEAPONSTATE_CLOSE_RANGE
;            StateName           = WithSword
;            Animation           = GUBoromir_IDLC
;                AnimationName     = GUBoromir_SKL.GUBoromir_IDLC
;                AnimationMode     = ONCE
;            End
;        End

        ; ATTACKING
        AnimationState        = ATTACKING
            Animation           = ALERT_1
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLA
                AnimationMode     = LOOP; ONCE
            End
;            Flags               = RESTART_ANIM_WHEN_COMPLETE ; acts like an idle animation & keeps running the animations.
        End
        
        ; --------- Selected Anims and Transitions
        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATND
                AnimationName            =    GUBoromir_SKL.GUBoromir_ATND
                AnimationMode            =    ONCE
            End
        End
        
        TransitionState                    =    TRANS_Selected_To_Idle
            Animation                    =    ATNE
                AnimationName            =    GUBoromir_SKL.GUBoromir_ATNE
                AnimationMode            =    ONCE
            End
        End
        
        AnimationState                = LEVELED                         ; This state clears itself in 3 seconds
            Animation                = LevelUp
                AnimationName        = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode        = ONCE
            End
        End

        AnimationState                =    SELECTED
            StateName                =    Selected
            SimilarRestart            =   Yes            
            Animation                =    ATNB
                AnimationName        =    GUBoromir_SKL.GUBoromir_ATNB
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
            EndScript
        End
        
        ;------------emotions---------------
        AnimationState            = EMOTION_CELEBRATING
            Animation           = CHRA
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode   = Once
            End
            Animation           = CHRB
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRB
                AnimationMode   = Once
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End
        
        AnimationState                    = EMOTION_ALERT EMOTION_MORALE_HIGH
            Animation                    = Taunting
                AnimationName            =  GUBoromir_SKL.GUBoromir_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End
        
        ; READY IDLE
        AnimationState        = EMOTION_ALERT
            Animation           = ALERT_1
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLA
                AnimationMode     = LOOP ;ONCE
            End
;            Flags               = RESTART_ANIM_WHEN_COMPLETE ; acts like an idle animation & keeps running the animations.
        End
        
        
        ; --------- Click and Hit Reactions ------------
        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = GUBoromir_SKL.GUBoromir_HITA
                AnimationMode = ONCE
            End
        End    
        
        
    End

    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState = MOUNTED MOVING WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOUNTED MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOUNTED MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOUNTED MOVING
        End
    End



    ; ***DESIGN parameters ***
    Side = Gondor
    EditorSorting = UNIT
    ThreatLevel = 4.0
    ThingClass = CHARACTER_UNIT
      BuildCost         = M_BOROMIR_BUILDCOST                
      BuildTime         = M_BOROMIR_BUILDTIME    
    
    DisplayMeleeDamage = M_BOROMIR_DAMAGE        
    
    HeroSortOrder = 50
    
    TransportSlotCount = 1
    WeaponSet
        Conditions = None 
        Weapon = PRIMARY    BoromirSword
        ;AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
    WeaponSet
        Conditions = MOUNTED
        Weapon = PRIMARY    BoromirSword
        ;AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
	
    ArmorSet
        Conditions      = None
        Armor           = BoromirHeroArmor
        DamageFX        = NormalDamageFX
    End
    ArmorSet
        Conditions      = MOUNTED
        Armor           = HeroArmorMounted
        DamageFX        = NormalDamageFX
    End
	
	ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = BoromirHeavyHeroArmor
        DamageFX        = NormalDamageFX
    End
    ArmorSet
        Conditions      = PLAYER_UPGRADE MOUNTED
        Armor           = BoromirHeavyArmorMounted
        DamageFX        = NormalDamageFX
    End
	
    VisionRange = M_VISION_STANDARD_MELEE                
    ShroudClearingRange = M_SHROUD_CLEAR_STANDARD

    BountyValue = M_GONDOR_BOROMIR_BOUNTY_VALUE
    DisplayName = OBJECT:GondorBoromir
    RecruitText = CONTROLBAR:GondorBoromirRecruit
    ReviveText    = CONTROLBAR:GondorBoromirRevive
    Hotkey        = CONTROLBAR:GondorBoromirHotkey
    CrusherLevel = 0            ;Can I crush anything?
    MountedCrusherLevel = 1        ;Crush level when mounted.
    CrushableLevel = 4            ;What am I?:        0 = for infantry, 1 = for trees, 2 = cavalry/heroes
    MountedCrushableLevel = 4    ;Crusable level when mounted.
    CrushWeapon        = HeroCrush  
	
    MinCrushVelocityPercent = 50 ; Has to be moving at at least 50% of full speed.
    CrushDecelerationPercent = 30 ; Lose xx percent of max velocity when crushing.
    
    CrushKnockback = 40
    CrushZFactor = 1.0

    CommandSet = BoromirCommandSet 
    CommandPoints = 0


    ; *** AUDIO Parameters ***;

    VoiceAttack                = BoromirVoiceAttack
    VoiceAttackCharge            = BoromirVoiceAttackCharge
    VoiceAttackMachine        = BoromirVoiceAttack
    VoiceAttackStructure        = BoromirVoiceAttackBuilding
    ;VoiceCreated            = BoromirVoiceSalute    ;this conflicts with his respawn dialogue line -- rehooked to spawn FX
    ;VoiceFullyCreated         = BoromirVoiceSalute    ;this conflicts with his respawn dialogue line -- rehooked to spawn FX
    VoiceFear                 = BoromirVoiceHelpMe
    VoiceMove                = BoromirVoiceMove
    VoiceMoveToCamp            = BoromirVoiceMoveCamp
    VoiceMoveWhileAttacking        = BoromirVoiceDisengage
    VoicePriority            = 84
    VoiceRetreatToCastle        = BoromirVoiceRetreat
    VoiceSelect                = BoromirVoiceSelect
    VoiceSelect2            = HeroVoiceSelect2
    VoiceSelectBattle         = BoromirVoiceSelectBattle
    VoiceGuard                = BoromirVoiceMove

    SoundImpact                = ImpactHorse

;BoromirVoiceJoinAnybody

    UnitSpecificSounds
        VoiceGarrison        = BoromirVoiceGarrison              
    End

    EvaEventDamagedOwner = UnitUnderAttack                 ;Eva event to trigger when unit is damaged
    EvaEventDieOwner = BoromirDie                        ;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
                                            ;For deaths you can respawn from, use the DeathFX

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:SwordIntoScabbard1        Animation:GUBoromir_SKL.GUBoromir_HRNA     Frames:7
        AnimationSound = Sound:BoromirHorn            Animation:GUBoromir_SKL.GUBoromir_HRNB     Frames:0
        AnimationSound = Sound:SwordShingClean1        Animation:GUBoromir_SKL.GUBoromir_HRNC     Frames:5
        AnimationSound = Sound:FootstepDirtA        Animation:GUBoromir_SKL.GUBoromir_RUNA     Frames:10 22
        AnimationSound = Sound:FootstepDirtA        Animation:GUBoromir_SKL.GUBoromir_RUNB     Frames:10 22
        AnimationSound = Sound:FootstepDirtA        Animation:GUBoromir_SKL.GUBoromir_ATRA     Frames:11 23 35 47 
        AnimationSound = Sound:FootstepDirtA        Animation:GUBoromir_SKL.GUBoromir_MFDA    Frames:8 20 31 41

        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUBoromir_SKL.GUBoromir_DTHA     Frames:116
        AnimationSound = Sound:BodyFallSoldier        Animation:GUBoromir_SKL.GUBoromir_LNDA     Frames:4
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUBoromir_SKL.GUBoromir_SPCE     Frames:82
        AnimationSound = Sound:HorseMoveFootsteps            Animation:RUHHs_Theo_SKL.RUHHs_Theo_ACCL    Frames:15 32
        AnimationSound = Sound:HorseMoveFootsteps            Animation:RUHHs_Theo_SKL.RUHHs_Theo_RUNA    Frames:0
        AnimationSound = Sound:HorseMoveFootsteps            Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNL1    Frames:0
        AnimationSound = Sound:HorseMoveFootsteps            Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNR1    Frames:0

        AnimationSound = Sound:HorseWhinny                Animation:RUHHs_Theo_SKL.RUHHs_Theo_IDLC    Frames:3

        AnimationSound = Sound:SwordIntoScabbard1            Animation:RUHHs_Theo_SKL.RUEomrHrs_SPRA    Frames:10
        AnimationSound = Sound:EomerThrowSpear            Animation:RUHHs_Theo_SKL.RUEomrHrs_SPRA    Frames:53
        AnimationSound = Sound:SwordShingClean1            Animation:RUHHs_Theo_SKL.RUEomrHrs_SPRA    Frames:75

        AnimationSound = Sound:BodyFallSoldier            Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA    Frames:3 10
        AnimationSound = Sound:HorseDieForHero            Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA    Frames:2
        AnimationSound = Sound:HorseDieForHero            Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA    Frames:0
        AnimationSound = Sound:BodyFallGenericNoArmor        Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA    Frames:6
        AnimationSound = Sound:BodyFallSoldier            Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA    Frames:45
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU1            ; Tie into LargeGroupAudio system
        Key = Human Unit Infantry Hero
        UnitWeight = 2
    End


    ; *** ENGINEERING Parameters ***

    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE HERO ARMY_SUMMARY
    PathfindDiameter = 40.0
	
    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate1   
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused = Yes
    End    
    
    Body = RespawnBody ModuleTag_RespawnBody1
        CheerRadius             = M_EMOTION_CHEER_RADIUS
        MaxHealth                 = M_BOROMIR_HEALTH    ;BALANCE Eomer Health
        PermanentlyKilledByFilter    = NONE        ;Who kills me permanently?
           DodgePercent              = M_HERO_DODGE_PERCENT
    End
    Behavior = RespawnUpdate ModuleTag_RespawnUpdate1
;        DeathAnim                = STUNNED                ;Model condition to play when killed-to-respawn
        DeathAnim                = DYING                  ;Model condition to play when killed-to-respawn
        DeathFX                = FX_BoromirDieToRespawn    ;FXList to play when killed-to-respawn
        DeathAnimationTime        = 4966 ;1133            ;How long DeathAnim will take.
        InitialSpawnFX            = FX_BoromirInitialSpawn
        RespawnAnim                = LEVELED                ;Animation to play when respawning.
        RespawnFX                = FX_BoromirRespawn        ;FXList to play when respawning.
        RespawnAnimationTime        = 2000                ;Time it takes for respawn to play.
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP        ;Respawn at this location -- and at it's exit production point if possible.
        ButtonImage                = HIBorimir
        
        ;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
        ;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
        RespawnRules =            AutoSpawn:No    Cost:700        Time:90000        Health:100%        ;DEFAULT VALUES
        RespawnEntry =    Level:2                Cost:800        Time:90000        ;For other levels, only override what is different.
        RespawnEntry =    Level:3                Cost:1000        Time:90000    ; Cost:900    
        RespawnEntry =    Level:4                Cost:1100        Time:90000    ; Cost:1000        
        RespawnEntry =    Level:5                Cost:1200        Time:120000    ; Cost:1100        
        RespawnEntry =    Level:6                Cost:1300        Time:120000    ; Cost:1200        
        RespawnEntry =    Level:7                Cost:1500        Time:120000    ; Cost:1300        
        RespawnEntry =    Level:8                Cost:1600        Time:120000    ; Cost:1400        
        RespawnEntry =    Level:9                Cost:1700        Time:120000    ; Cost:1500        
        RespawnEntry =    Level:10            Cost:1800        Time:120000    ; Cost:1600        
    End

    Behavior = AutoHealBehavior ModuleTag_BoromirHealing1
        StartsActive = Yes
        HealingAmount = M_HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = M_HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End
    
    Behavior = LifetimeUpdate ModuleTag_LifeTime1            ; Used after 'death' to continue for a certain time before really dying.
        WaitForWakeUp = Yes
    End
    
    Behavior = AIUpdateInterface ModuleTag_031
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate            = 500
        AILuaEventsList                = BoromirFunctions
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL 
        Speed     = M_NORMAL_GOOD_HERO_SPEED
    End
	
    LocomotorSet
        Locomotor = HeroHorseLocomotor
        Condition = SET_MOUNTED 
        Speed     = M_NORMAL_MOUNTED_HERO_SPEED
    End
    
    Behavior = AttributeModifierAuraUpdate ModuleTag_HeroRadiateFear1
        StartsActive    = No ;If no, requires upgrade to turn on.
        BonusName        = HeroRadiateFear
        TriggeredBy        = Upgrade_HeroRadiateFear
        RefreshDelay    = 2000
        Range            = 120
        TargetEnemy        = Yes
        ObjectFilter    = ANY +ORC
    End    
    
    Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior1
    End        
    
    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing1
        StartsActive                = No
        TriggeredBy                    = Upgrade_ElvenGift
        HealingAmount                = M_ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay                = M_ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay = M_HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End
    
    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus1
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End
	
    Behavior = SubObjectsUpgrade Armor_Upgrade
        TriggeredBy        = Upgrade_GenericUpgrade1
        UpgradeTexture    = guboromirv.tga 0 guboromirha.tga
        RecolorHouse    = No
    End

    Behavior = ArmorUpgrade ArmorUpgradeModuleTag
        TriggeredBy = Upgrade_GenericUpgrade1
    End
    
    Behavior = DualWeaponBehavior ModuleTag_131
        SwitchWeaponOnCloseRangeDistance = 161
    End

    Behavior = PhysicsBehavior ModuleTag_041
        GravityMult = 1.0
        ShockStandingTime        = 4000    ;msec
    End
    
    Behavior = SlowDeathBehavior ModuleTag_051
        DeathTypes = ALL 
        SinkDelay = 3000
        SinkRate = 0.40     ; in Dist/Sec
        DestructionDelay = 8000
        Sound = INITIAL BoromirVoiceDie
;        - Where does this stuff go? -
;        UnpackTime              = 2000 
;        PreparationTime         = 1   
;        PersistentPrepTime      = 4000 
;        PackTime                = 2000
;        WhichSpecialWeapon = 1
    End
    
    Behavior = SquishCollide ModuleTag_061
        ;nothing
    End
    
    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag1
        HitReactionLifeTimer1 = 7 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
        HitReactionLifeTimer2 = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
        HitReactionLifeTimer3 = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

        HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
        HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
        HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger
    End
    
    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableHorn1
        SpecialPowerTemplate        = SpecialAbilityHornOfGondor
        TriggeredBy                    = Upgrade_BoromirHornOfGondor
    End
    Behavior = SpecialPowerModule ModuleTag_HornStarter1
        SpecialPowerTemplate        = SpecialAbilityHornOfGondor
        UpdateModuleStartsAttack    = Yes
        AntiCategory                = LEADERSHIP
        AttributeModifier            = BoromirGondorHornAntiCategory        ; Used for the anti category duration only.
        AttributeModifierRange        = 100.0
        StartsPaused                = Yes                                ; obtained on level 2
    End
    Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_HornUpdate1
        SpecialPowerTemplate    = SpecialAbilityHornOfGondor
        UnpackTime              = 1700                                    ; Drawing the horn
        PreparationTime         = 1                                        ; nothing
        PersistentPrepTime      = 1600                                    ; Blowing
        PackTime                = 1666                                    ; Putting horn away
        AwardXPForTriggering    = 0
    End

;--------------------- Start Leadership bonus ---------------
    Behavior = AttributeModifierAuraUpdate ModuleTag_BoromirLeadership1
        StartsActive    = No ;If no, requires upgrade to turn on.
        BonusName        = BoromirPassiveLeadership
        TriggeredBy        = Upgrade_BoromirForGondorSpeech
        RefreshDelay    = 2000
        Range            = 200
        ObjectFilter    = ANY +INFANTRY +CAVALRY  -STRUCTURE -BASE_FOUNDATION -HERO
    End    

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_UnpauseLeadership1
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_BoromirForGondorSpeech
    End
    Behavior = SpecialPowerModule ModuleTag_BoromirLeadershipUpdate1
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused = Yes
    End    
;--------------------- End Leadership bonus ---------------

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL	;volumetric shadow that doesn't cast onto all objects.
	ShadowSizeX = 20
	ShadowSizeY = 20
	ShadowTexture = ShadowI

    ;;; KINGS FAVOUR ;;;    
    
    Behavior                 = UnpauseSpecialPowerUpgrade ModuleTag_KingsFavorEnabler1
    SpecialPowerTemplate         = SpecialAbilityKingsFavor
    TriggeredBy             = Upgrade_FaramirCaptainOfGondor
    End
    
    Behavior                 = SpecialPowerModule ModuleTag_KingsFavorSpecialPowerModule1
        SpecialPowerTemplate        = SpecialAbilityKingsFavor 
        StartsPaused            = Yes
    UpdateModuleStartsAttack    = Yes
        InitiateSound            = BoromirVoiceCaptainOfGondor
    End
    
    Behavior = LevelGrantSpecialPower ModuleTag_KingsFavor1
    SpecialPowerTemplate            = SpecialAbilityKingsFavor
    UnpackingVariation            = 2
    StartAbilityRange            = 200.0
;    LevelFX = FX_PorterDeliver
    LevelFX                        = FX_LevelUp

    Experience                    = 50
    RadiusEffect                = 150
    AcceptanceFilter            = ANY +CAVALRY +INFANTRY -STRUCTURE -CASTLE_KEEP -BASE_FOUNDATION -HERO -MOVE_ONLY

    UnpackTime                = 2000
    PreparationTime                = 1   
    FreezeAfterTriggerDuration        = 2000 ; Hold AI for this long after we fire.        
    End
	
    Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter                      
        SpecialPowerTemplate        = SpecialAbilityToggleMounted
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
    End
    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
        SpecialPowerTemplate        = SpecialAbilityToggleMounted
        UnpackTime                    = 2000
        PreparationTime                = 1  
        PersistentPrepTime            = 250
        PackTime                    = 2000
        OpacityTarget                = .3        ; How see-thru to be at peak of change   
        AwardXPForTriggering        = 0
    End

;
    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
    LevelToGrant = 3
    MPOnly = Yes
    End

End

;------------------------------------------------------------------------------
ChildObject GondorBoromirCavalry GondorBoromir

    Draw = W3DScriptedModelDraw ModuleTag_W3DModelDrawInWorldBuilder
        ;When in Worldbuilder, show the mounted version of Eomer!
        
        OkToChangeModelColor = Yes
        
        DefaultModelConditionState
            Model = None
        End
        ModelConditionState = WORLD_BUILDER
            Model = GUBoromirH_SKN
        End        
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
         SpecialPowerTemplate    = SpecialAbilityToggleMounted        
         TriggerInstantlyOnCreate = Yes  ;Instantly puts Eomer on a horse.
         UnpackTime              = 2000
         PreparationTime         = 1  
         PersistentPrepTime      = 250
         PackTime                = 2000
         OpacityTarget            = .3        ; How see-thru to be at peak of change
         AwardXPForTriggering    = 0
    End
End
